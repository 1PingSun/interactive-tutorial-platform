# Task 3 - 工控協議滲透：Modbus概述

## Modbus 協議基礎

Modbus 是一種工業通訊協議，廣泛應用於工控系統中。

## 通訊架構

### 主/從架構
- **主站（Master）**：發送請求的設備
- **從站（Slave）**：回應請求的設備
- **特點**：一次只能有一個主站

## 暫存器類型

### 線圈（Coil）
- **位元數**：1 位元
- **功能**：控制設備開關
- **存取**：可讀寫
- **範圍**：00001-09999

### 離散輸入（Discrete Input）
- **位元數**：1 位元
- **功能**：讀取開關狀態
- **存取**：唯讀
- **範圍**：10001-19999

### 輸入暫存器（Input Register）
- **位元數**：16 位元
- **功能**：讀取類比值
- **存取**：唯讀
- **範圍**：30001-39999

### 保持暫存器（Holding Register）
- **位元數**：16 位元
- **功能**：儲存設定值
- **存取**：可讀寫
- **範圍**：40001-49999

## 常用功能碼

| 功能碼 | 操作 | 說明 |
|--------|------|------|
| 01 | 讀取線圈 | 讀取多個線圈狀態 |
| 02 | 讀取離散輸入 | 讀取多個離散輸入 |
| 03 | 讀取保持暫存器 | 讀取多個保持暫存器 |
| 04 | 讀取輸入暫存器 | 讀取多個輸入暫存器 |
| 05 | 寫入單個線圈 | 寫入單個線圈 |
| 06 | 寫入單個保持暫存器 | 寫入單個保持暫存器 |
| 15 | 寫入多個線圈 | 批量控制多個開關狀態 |
| 16 | 寫入多個保持暫存器 | 批量寫入多個保持暫存器 |

## 傳輸模式

### Modbus RTU
- **傳輸方式**：RS-485
- **特點**：二進制編碼
- **應用**：現場設備通訊

### Modbus TCP
- **傳輸方式**：乙太網路
- **特點**：TCP/IP 封裝
- **應用**：網路化設備